(this["webpackJsonpreact-firechat"]=this["webpackJsonpreact-firechat"]||[]).push([[0],{22:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var c=n(6),r=n.n(c),a=n(16),i=n.n(a),s=(n(22),n(1)),o=function(e){var t=e.onClick,n=void 0===t?null:t,c=e.children,r=void 0===c?null:c;return Object(s.jsxs)("button",{className:"sign-in",onClick:n,children:[r," "]})},u=n(13),l=n(10),d=n(9),j=n.n(d),h=n(12),b=n(11);n(25),n(29);b.a.initializeApp({apiKey:"AIzaSyCPTG8IYFz5XHvu3PKv72RQEkRFTpVmM_g",authDomain:"firechat-test-73281.firebaseapp.com",projectId:"firechat-test-73281",storageBucket:"firechat-test-73281.appspot.com",messagingSenderId:"357317668600",appId:"1:357317668600:web:f3fc653b583c39e78e550d",measurementId:"G-J0CBREM2GG"});var p=b.a.firestore(),f=new b.a.auth.GoogleAuthProvider,O=function(){var e=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.a.auth().useDeviceLanguage(),e.prev=1,e.next=4,b.a.auth().signInWithPopup(f);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.auth().signOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),x=n(31),m=function(e){var t="";return e&&(t=(t=Object(x.a)(e,new Date)).charAt(0).toUpperCase()+t.slice(1)),t},g=function(e){var t=e.createdAt,n=void 0===t?null:t,c=e.text,r=void 0===c?"":c,a=e.displayName,i=void 0===a?"":a,o=e.photoURL,u=void 0===o?"":o;return r?Object(s.jsxs)("div",{className:"mj",children:[Object(s.jsx)("b",{children:i?Object(s.jsxs)("p",{children:[Object(s.jsxs)("p",{children:[u?Object(s.jsx)("img",{src:u,alt:"Avatar",className:"rounded-full mr-a",width:45,height:45}):null," "]}),i,"...",(null===n||void 0===n?void 0:n.seconds)?Object(s.jsx)("span",{children:m(new Date(1e3*n.seconds))}):null]}):null}),Object(s.jsxs)("p",{children:[r," "]})]}):null},w=function(e){var t,n=e.user,r=void 0===n?null:n,a=Object(c.useRef)(),i=Object(c.useState)([]),d=Object(l.a)(i,2),j=d[0],h=d[1];Object(c.useEffect)((function(){return p.collection("messages").orderBy("createdAt").limit(100).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id})}));h(t)}))}),[]);var f=r.uid,O=r.displayName,x=r.photoURL,m=Object(c.useState)(""),w=Object(l.a)(m,2),C=w[0],k=w[1],y=p.collection("messages"),A=Object(c.useRef)();return Object(c.useEffect)((function(){A.current&&A.current.focus()}),[A]),null===(t=a.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("header",{children:[Object(s.jsx)("h1",{children:"\u269b\ufe0f\ud83d\udd25\ud83d\udcac"}),Object(s.jsx)(o,{onClick:v,children:" Logout Google"})]}),Object(s.jsxs)("section",{children:[Object(s.jsxs)("main",{children:[Object(s.jsx)("h1",{children:"\ud83d\udcac\u269b Bienvenidos a React-FireChat \u269b\ud83d\udcac"}),Object(s.jsx)("ul",{children:j.map((function(e){return Object(s.jsx)("li",{children:Object(s.jsx)(g,Object(u.a)({},e))},e.id)}))}),Object(s.jsx)("span",{id:"chats",ref:a})]}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=C.trim();t&&(y.add({text:t,createdAt:b.a.firestore.FieldValue.serverTimestamp(),uid:f,displayName:O,photoURL:x}),k(""))},children:[Object(s.jsx)("input",{ref:A,type:"text",value:C,onChange:function(e){e.preventDefault(),k(e.target.value)},placeholder:"Escribe tu mensaje aqu\xed..."}),Object(s.jsx)("button",{type:"submit",disabled:!C,children:Object(s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-cursor-fill",viewBox:"0 0 16 16",children:Object(s.jsx)("path",{d:"M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z"})})})]})]})]})};var C=function(e){var t=Object(c.useState)(!0),n=Object(l.a)(t,1)[0],r=Object(c.useState)((function(){return e.currentUser})),a=Object(l.a)(r,2),i=a[0],s=a[1];return Object(c.useEffect)((function(){return e.onAuthStateChanged((function(e){s(e||!1)}))}),[e,n]),{user:i,initializing:n}};var k=function(){var e=C(b.a.auth()),t=e.user;return e.initializing,Object(s.jsx)("div",{className:"App",children:t?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(w,{user:t})}):Object(s.jsxs)("div",{className:"shadow-lg p-3 mb-5 bg-body rounded inicio",children:[Object(s.jsx)("h1",{children:"\ud83d\udd25 React FireChat"}),Object(s.jsx)("h3",{children:"La forma m\xe1s f\xe1cil de chatear con personas de todo el mundo"}),Object(s.jsx)("br",{}),Object(s.jsxs)(o,{onClick:O,children:[Object(s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"20",fill:"currentColor",class:"bi bi-google",viewBox:"0 0 16 16",children:Object(s.jsx)("path",{d:"M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"})})," ","Sing in with Google"]})]})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(k,{})}),document.getElementById("root")),y()}},[[28,1,2]]]);
//# sourceMappingURL=main.5f9152f4.chunk.js.map